<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Kindergarten Schedule Generator</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="bg-white shadow-sm py-3 mb-4">
        <div class="container">
            <div class="d-flex align-items-center justify-content-between">
                <div class="logo d-flex align-items-center">
                    <i class="fas fa-school text-primary fs-2 me-2"></i>
                    <h1 class="h4 mb-0 text-primary">Kindergarten Schedule Generator</h1>
                </div>
               
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container my-5">
        <div class="auth-card">
            <div class="auth-card-header">
                <i class="fas fa-user-plus"></i>
                <h2>Create Your Account</h2>
                <p>Join us to start managing kindergarten schedules!</p>
            </div>

            <!-- Success Message (Hidden by default) -->
            <div id="successMessage" class="alert alert-success" style="display: none;">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Success!</strong> Your account has been created successfully.
            </div>

            <!-- Error Message (Hidden by default) -->
            <div id="errorMessage" class="alert alert-danger" style="display: none;">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong>Error!</strong> <span id="errorText">Please check the form and try again.</span>
            </div>
<form id="signupForm" method="post" action="{% url 'signup' %}" novalidate>
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for err in form.non_field_errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
      </div>
    {% endif %}

    <!-- Full Name -->
    <div class="mb-3">
        <label for="full_name" class="form-label">Full Name</label>
        <div class="input-group">
            <span class="input-group-text"><i class="fas fa-user"></i></span>
            <input type="text" class="form-control" id="full_name" name="full_name"
                   placeholder="Enter your full name" required
                   value="{{ form.data.full_name|default:'' }}">
        </div>
        {% if form.errors.full_name %}
          <div class="text-danger small">{{ form.errors.full_name.0 }}</div>
        {% endif %}
        <div class="invalid-feedback">Please enter your full name.</div>
    </div>

    <!-- Email -->
    <div class="mb-3">
        <label for="email" class="form-label">Email Address</label>
        <div class="input-group">
            <span class="input-group-text"><i class="fas fa-envelope"></i></span>
            <input type="email" class="form-control" id="email" name="email"
                   placeholder="Enter your email" required
                   value="{{ form.data.email|default:'' }}">
        </div>
        {% if form.errors.email %}
          <div class="text-danger small">{{ form.errors.email.0 }}</div>
        {% endif %}
        <div class="invalid-feedback">Please enter a valid email address.</div>
    </div>

    <!-- Password -->
    <div class="mb-3">
        <label for="password1" class="form-label">Password</label>
        <div class="input-group position-relative">
            <span class="input-group-text"><i class="fas fa-lock"></i></span>
            <input type="password" class="form-control" id="password1" name="password1"
                   placeholder="Create a password" required minlength="8">
            <span class="password-toggle" onclick="togglePassword('password1', this)">
                <i class="fas fa-eye"></i>
            </span>
        </div>
        {% if form.errors.password1 %}
          <div class="text-danger small">{{ form.errors.password1.0 }}</div>
        {% endif %}
        <div class="invalid-feedback">Password must be at least 8 characters long.</div>
        <small class="text-muted">Minimum 8 characters required</small>
    </div>

    <!-- Confirm Password -->
    <div class="mb-3">
        <label for="password2" class="form-label">Confirm Password</label>
        <div class="input-group position-relative">
            <span class="input-group-text"><i class="fas fa-lock"></i></span>
            <input type="password" class="form-control" id="password2" name="password2"
                   placeholder="Confirm your password" required>
            <span class="password-toggle" onclick="togglePassword('password2', this)">
                <i class="fas fa-eye"></i>
            </span>
        </div>
        {% if form.errors.password2 %}
          <div class="text-danger small">{{ form.errors.password2.0 }}</div>
        {% endif %}
        <div class="invalid-feedback">Passwords do not match.</div>
    </div>

    <button type="submit" class="btn btn-primary btn-block btn-lg">
        <i class="fas fa-user-plus me-2"></i>Create Account
    </button>
</form>


            <!-- Login Link -->
            <div class="auth-links">
                <p>Already have an account? <a href="{% url 'login' %}">Sign in here</a></p>
            </div>
        </div>
    </main>



    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
  // Toggle password (keep existing if already present)
  function togglePassword(fieldId, icon) {
    const passwordField = document.getElementById(fieldId);
    const iconElement = icon.querySelector('i');
    if (passwordField.type === 'password') {
      passwordField.type = 'text';
      iconElement.classList.remove('fa-eye');
      iconElement.classList.add('fa-eye-slash');
    } else {
      passwordField.type = 'password';
      iconElement.classList.remove('fa-eye-slash');
      iconElement.classList.add('fa-eye');
    }
  }

  (function () {
    const form = document.getElementById('signupForm');
    if (!form) return;
    form.addEventListener('submit', function (event) {
      // client-side checks only — do not block successful submits
      const p1 = document.getElementById('password1').value;
      const p2 = document.getElementById('password2').value;
      const confirmField = document.getElementById('password2');

      confirmField.setCustomValidity('');
      if (p1 !== p2) {
        confirmField.setCustomValidity('Passwords do not match');
      }

      if (!form.checkValidity()) {
        // invalid: show browser messages, block submit
        event.preventDefault();
        event.stopPropagation();
        form.classList.add('was-validated');
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('errorText').textContent = 'Please fix the errors and try again.';
      } else {
        // valid: allow normal POST (do not call preventDefault)
        document.getElementById('errorMessage').style.display = 'none';
        // optionally disable button to prevent double submit
        const btn = form.querySelector('button[type="submit"]');
        if (btn) { btn.disabled = true; btn.innerText = 'Creating…'; }
      }
    });
  })();
</script>

    
    <!-- Custom JavaScript -->
    <!-- <script>
        // Password Toggle Function
        function togglePassword(fieldId, icon) {
            const passwordField = document.getElementById(fieldId);
            const iconElement = icon.querySelector('i');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                iconElement.classList.remove('fa-eye');
                iconElement.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                iconElement.classList.remove('fa-eye-slash');
                iconElement.classList.add('fa-eye');
            }
        }

        // Form Validation
        document.getElementById('signupForm').addEventListener('submit', function(event) {
            event.preventDefault();
            event.stopPropagation();

            const form = this;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const confirmPasswordField = document.getElementById('confirmPassword');
            
            // Check if passwords match
            if (password !== confirmPassword) {
                confirmPasswordField.setCustomValidity('Passwords do not match');
            } else {
                confirmPasswordField.setCustomValidity('');
            }

            // Validate form
            if (form.checkValidity()) {
                // Hide error message
                document.getElementById('errorMessage').style.display = 'none';
                
                // Show success message
                document.getElementById('successMessage').style.display = 'block';
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // Simulate redirect to login page after 2 seconds
                setTimeout(() => {
                    // window.location.href = 'login.html';
                    console.log('Redirect to login page (disabled for demo)');
                }, 2000);
                
                // Reset form
                form.reset();
                form.classList.remove('was-validated');
            } else {
                // Show validation errors
                form.classList.add('was-validated');
                
                // Show error message
                document.getElementById('errorText').textContent = 'Please check the form and try again.';
                document.getElementById('errorMessage').style.display = 'block';
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        // Real-time password matching validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            
            if (password !== confirmPassword) {
                this.setCustomValidity('Passwords do not match');
            } else {
                this.setCustomValidity('');
            }
        });
    </script> -->
</body>
</html>
